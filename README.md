# Ассемблер PDP11/БК0010

Транслятор ассемблерных программ для процессоров семейства DEC в машинный код PDP11/БК0010.


## Как собрать транслятор из исходников

```bash
make
```

Скомпилированые бинарники под некоторые платформы лежат в папке [release](https://github.com/imachug/pdp11asm/tree/master/release).


## Трансляция ассемблерного текста в машинные коды


1. Скопируйте бинарник под вашу платформу куда-нибудь (например, `/Users/Ivanq/Documents/BK0010/compiler` на MacOS или `/home/Documents/BK0010/compiler` на Linux).

2. Создайте файл [compile.sh](https://gist.github.com/imachug/3a27a7516fc50b5b8b2595b8af2d571e) в той же директории. По умолчанию компилятор создает файл без заголовка и без расширения (чистый бинарный код), но если Вам нужен BIN-файл (с заголовком, содержащим адрес и длину), добавьте строку `.LINK 1000` в самое начало своей программы и `make_bk0010_rom "file.bin", 1000` в конец своей ассемблерной программы. (1000 - адрес, с которого будет компилироваться программа)

3. Добавьте права на выполение командой `chmod +x compiler compile.sh`.

4. Вам понадобится текстовый редактор Sublime Text и [плагин для подсветки синтаксиса DEC/PDP11](https://gist.github.com/imachug/3ab11df5e91c8d815a8c63a76bb08b14).

5. В настройках Sublime Text выберете *Browse packages...*. Откроется папка пакетов. Создайте в подпапке `User` файл [BK0010.sublime-build](https://gist.github.com/imachug/223e7b30b041ec93938f1c8dda6afaf7). Замените `/Users/Ivanq/Documents/BK0010/compile.sh` на полный путь к файлу [compile.sh](https://gist.github.com/imachug/3a27a7516fc50b5b8b2595b8af2d571e) на вашем компьютере (относительный путь типа `~/Documents` почему-то не работает). Чтобы узнать полный путь к файлу на MacOS, нажмите на него правой кнопкой мыши, затем удерживайте <kbd>alt</kbd> и выберете *Copy as Pathname*.

6. Теперь, чтобы транслировать ассемблерную программу, нажмите в Sublime Text <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>B</kbd>, выберите `BK0010`. В следующий раз будет работать просто <kbd>Ctrl</kbd>+<kbd>B</kbd>.

7. Результат работы транслятора - файл с машинным кодом - запишется в ту же директорию, где лежит исходный текст ассемблерной программы.

8. Для запуска вам понадобится эмулятор БК0010/11М.
